{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/inherits\";\nimport * as React from \"react\";\nimport NotebookPreview from \"@nteract/notebook-preview\";\nimport Markdown from \"@nteract/markdown\";\nimport { Source } from \"@nteract/presentational-components\";\nimport { standardTransforms, standardDisplayOrder, registerTransform } from \"@nteract/transforms\";\nimport { VegaLite1, VegaLite2, Vega2, Vega3 } from \"@nteract/transform-vega\"; // import DataResourceTransform from \"@nteract/transform-dataresource\";\n\nimport { PlotlyNullTransform, PlotlyTransform } from \"../../transforms\";\nimport DirectoryListing from \"./directory-listing\";\nimport HTMLView from \"./html\";\nimport JSONView from \"./json\";\nimport CSVView from \"./csv\";\n\nvar jquery = require(\"jquery\"); // HACK: Temporarily provide jquery for others to use...\n\n\nglobal.jquery = jquery;\nglobal.$ = jquery; // Order is important here. The last transform in the array will have order `0`.\n\nvar _reduce = [// DataResourceTransform,\nPlotlyNullTransform, PlotlyTransform, VegaLite1, VegaLite2, Vega2, Vega3].reduce(registerTransform, {\n  transforms: standardTransforms,\n  displayOrder: standardDisplayOrder\n}),\n    transforms = _reduce.transforms,\n    displayOrder = _reduce.displayOrder;\n\nvar suffixRegex = /(?:\\.([^.]+))?$/;\n\nvar File =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(File, _React$Component);\n\n  function File() {\n    _classCallCheck(this, File);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(File).apply(this, arguments));\n  }\n\n  _createClass(File, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var name = this.props.entry.name;\n      var presuffix = suffixRegex.exec(name);\n\n      if (!presuffix) {\n        return null;\n      }\n\n      var suffix = (presuffix[1] || \"\").toLowerCase();\n\n      switch (suffix) {\n        case \"html\":\n          return React.createElement(HTMLView, {\n            entry: this.props.entry\n          });\n\n        case \"json\":\n          return React.createElement(JSONView, {\n            entry: this.props.entry\n          });\n\n        case \"csv\":\n          return React.createElement(CSVView, {\n            entry: this.props.entry\n          });\n\n        case \"md\":\n        case \"markdown\":\n        case \"rmd\":\n          return React.createElement(Markdown, {\n            source: this.props.entry.content\n          });\n\n        case \"js\":\n          return React.createElement(Source, {\n            language: \"javascript\"\n          }, this.props.entry.content);\n\n        case \"py\":\n        case \"pyx\":\n          return React.createElement(Source, {\n            language: \"python\"\n          }, this.props.entry.content);\n\n        case \"gif\":\n        case \"jpeg\":\n        case \"jpg\":\n        case \"png\":\n          return React.createElement(\"img\", {\n            src: \"/files/\".concat(this.props.pathname),\n            alt: this.props.pathname\n          });\n\n        default:\n          if (this.props.entry.format === \"text\") {\n            return React.createElement(Source, {\n              language: \"text/plain\"\n            }, this.props.entry.content);\n          }\n\n          return React.createElement(\"a\", {\n            href: \"/files/\".concat(this.props.pathname)\n          }, \"Download raw file\");\n      }\n    }\n  }]);\n\n  return File;\n}(React.Component);\n\nexport var Entry = function Entry(props) {\n  if (props.entry.content === null) {\n    return null;\n  }\n\n  switch (props.entry.type) {\n    case \"directory\":\n      // Dynamic type check on content being an Array\n      if (_Array$isArray(props.entry.content)) {\n        return React.createElement(DirectoryListing, {\n          contents: props.entry.content,\n          basepath: \"/view\"\n        });\n      }\n\n      return null;\n\n    case \"file\":\n      // TODO: Case off various file types (by extension, mimetype)\n      return React.createElement(File, {\n        entry: props.entry,\n        pathname: props.pathname\n      });\n\n    case \"notebook\":\n      return React.createElement(NotebookPreview, {\n        notebook: props.entry.content,\n        displayOrder: displayOrder,\n        transforms: transforms\n      });\n\n    default:\n      return React.createElement(\"pre\", null, _JSON$stringify(props.entry.content));\n  }\n};","map":{"version":3,"sources":["/home/wutali/Workspace/wutali/commuter/components/contents/index.js"],"names":["React","NotebookPreview","Markdown","Source","standardTransforms","standardDisplayOrder","registerTransform","VegaLite1","VegaLite2","Vega2","Vega3","PlotlyNullTransform","PlotlyTransform","DirectoryListing","HTMLView","JSONView","CSVView","jquery","require","global","$","reduce","transforms","displayOrder","suffixRegex","File","name","props","entry","presuffix","exec","suffix","toLowerCase","content","pathname","format","Component","Entry","type"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from \"react\";\nimport NotebookPreview from \"@nteract/notebook-preview\";\nimport Markdown from \"@nteract/markdown\";\nimport { Source } from \"@nteract/presentational-components\";\nimport {\n  standardTransforms,\n  standardDisplayOrder,\n  registerTransform\n} from \"@nteract/transforms\";\nimport { VegaLite1, VegaLite2, Vega2, Vega3 } from \"@nteract/transform-vega\";\n// import DataResourceTransform from \"@nteract/transform-dataresource\";\n\nimport { PlotlyNullTransform, PlotlyTransform } from \"../../transforms\";\n\nimport DirectoryListing from \"./directory-listing\";\nimport HTMLView from \"./html\";\nimport JSONView from \"./json\";\nimport CSVView from \"./csv\";\n\nconst jquery = require(\"jquery\");\n\n// HACK: Temporarily provide jquery for others to use...\nglobal.jquery = jquery;\nglobal.$ = jquery;\n\n// Order is important here. The last transform in the array will have order `0`.\nconst { transforms, displayOrder } = [\n  // DataResourceTransform,\n  PlotlyNullTransform,\n  PlotlyTransform,\n  VegaLite1,\n  VegaLite2,\n  Vega2,\n  Vega3\n].reduce(registerTransform, {\n  transforms: standardTransforms,\n  displayOrder: standardDisplayOrder\n});\n\nconst suffixRegex = /(?:\\.([^.]+))?$/;\n\nclass File extends React.Component<*> {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    const name = this.props.entry.name;\n    const presuffix = suffixRegex.exec(name);\n\n    if (!presuffix) {\n      return null;\n    }\n\n    const suffix = (presuffix[1] || \"\").toLowerCase();\n\n    switch (suffix) {\n      case \"html\":\n        return <HTMLView entry={this.props.entry} />;\n      case \"json\":\n        return <JSONView entry={this.props.entry} />;\n      case \"csv\":\n        return <CSVView entry={this.props.entry} />;\n      case \"md\":\n      case \"markdown\":\n      case \"rmd\":\n        return <Markdown source={this.props.entry.content} />;\n      case \"js\":\n        return (\n          <Source language=\"javascript\">{this.props.entry.content}</Source>\n        );\n      case \"py\":\n      case \"pyx\":\n        return <Source language=\"python\">{this.props.entry.content}</Source>;\n      case \"gif\":\n      case \"jpeg\":\n      case \"jpg\":\n      case \"png\":\n        return (\n          <img\n            src={`/files/${this.props.pathname}`}\n            alt={this.props.pathname}\n          />\n        );\n      default:\n        if (this.props.entry.format === \"text\") {\n          return (\n            <Source language=\"text/plain\">{this.props.entry.content}</Source>\n          );\n        }\n        return <a href={`/files/${this.props.pathname}`}>Download raw file</a>;\n    }\n  }\n}\n\ntype EntryProps = {\n  entry: JupyterApi$Content,\n  pathname: string,\n  basepath: string\n};\n\nexport const Entry = (props: EntryProps) => {\n  if (props.entry.content === null) {\n    return null;\n  }\n\n  switch (props.entry.type) {\n    case \"directory\":\n      // Dynamic type check on content being an Array\n      if (Array.isArray(props.entry.content)) {\n        return (\n          <DirectoryListing contents={props.entry.content} basepath={\"/view\"} />\n        );\n      }\n      return null;\n    case \"file\":\n      // TODO: Case off various file types (by extension, mimetype)\n      return <File entry={props.entry} pathname={props.pathname} />;\n    case \"notebook\":\n      return (\n        <NotebookPreview\n          notebook={props.entry.content}\n          displayOrder={displayOrder}\n          transforms={transforms}\n        />\n      );\n    default:\n      return <pre>{JSON.stringify(props.entry.content)}</pre>;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}